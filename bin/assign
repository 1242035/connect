#!/usr/bin/env node

/**
 * Initialize database
 */

require('../server');


/**
 * Dependencies
 */

var User = require('../models/User');


/**
 * Arguments
 */


var email = process.argv[2]
  , role  = process.argv[3]
  ;


User.getByEmail(email, function (err, user) {
  if (!user) {
    console.log('Unknown user.');
    process.exit();
  }

  User.addRoles(user, role, function (err, result) {

    if (err) {
      console.log(err.message || err.error);
      process.exit();
    }

    console.log(user.name + ' (' + user.email + ') now has the role "' + role + '."', result);
    process.exit();
  });
});
